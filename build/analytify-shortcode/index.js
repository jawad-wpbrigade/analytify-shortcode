!function(){"use strict";var e=window.wp.blocks,t=window.React,a=window.wp.components;const l=(0,t.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"33.2px",height:"33.2px",viewBox:"-478.3 346.3 33.2 33.2"},(0,t.createElement)(a.Path,{d:"M-446.5,375.9c-0.8,0-1.4-0.6-1.4-1.4v-1.4v-1c-3,4.5-8,7.4-13.8,7.4c-9.2,0-16.6-7.4-16.6-16.6 c0-9.2,7.4-16.6,16.6-16.6c5.8,0,10.8,2.9,13.8,7.4v-0.3v-0.1l0,0c0.1-0.7,0.7-1.3,1.4-1.3c0.7,0,1.3,0.6,1.4,1.3l0,0v0.1v2.1v17.6 v1.4C-445.1,375.2-445.7,375.9-446.5,375.9z M-461.7,349.1c-7.6,0-13.8,6.2-13.8,13.8s6.2,13.8,13.8,13.8s13.8-6.2,13.8-13.8 S-454.1,349.1-461.7,349.1z"}),(0,t.createElement)(a.Path,{d:"M-467.4,361.9c-0.9,0-1.6,0.7-1.6,1.6v5.3c0,0.9,0.7,1.6,1.6,1.6c0.9,0,1.6-0.7,1.6-1.6v-5.3 C-465.9,362.6-466.6,361.9-467.4,361.9z M-461.7,359.3c-0.9,0-1.6,0.7-1.6,1.6v7.9c0,0.9,0.7,1.6,1.6,1.6s1.6-0.7,1.6-1.6v-7.9 C-460.1,360-460.8,359.3-461.7,359.3z M-456,355.4c-0.9,0-1.6,0.7-1.6,1.6v11.8c0,0.9,0.7,1.6,1.6,1.6s1.6-0.7,1.6-1.6V357 C-454.4,356.1-455.1,355.4-456,355.4z"}));var s=window.wp.data,o=window.wp.blockEditor;const n=({name:a,setAttributes:l})=>{const{blockType:n,defaultVariation:r,variations:c}=(0,s.useSelect)((t=>{const{getBlockVariations:l,getBlockType:s,getDefaultBlockVariation:o}=t(e.store);return{blockType:s(a),defaultVariation:o(a,"block"),variations:l(a,"block")}}),[a]);return(0,t.createElement)("div",{...(0,o.useBlockProps)()},(0,t.createElement)(o.__experimentalBlockVariationPicker,{icon:n?.icon?.src,label:n?.title,variations:c,onSelect:(e=r)=>{e.attributes&&l(e.attributes)}}))};var r=window.wp.i18n,c=JSON.parse('[{"value":"","label":"CLEAR METRICS"},{"value":"totalUsers","label":"Total Users"},{"value":"newUsers","label":"New Users"},{"value":"sessions","label":"Sessions"},{"value":"bounceRate","label":"Bounce Rate"},{"value":"userEngagementDuration","label":"User Engagement Duration"},{"value":"averageSessionDuration","label":"Average Session Duration"},{"value":"screenPageViews","label":"Page Views"},{"value":"screenPageViewsPerSession","label":"Screen Page Views Per Session"}]'),i=window.wp.compose,u=window.wp.element;function d({attributes:e,setAttributes:l}){const{shortcode:s,selectedMetrics:n,selectedDate:v,analyticsFor:m}=e,p=(0,u.useRef)(!0),y=(0,i.useInstanceId)(d);(0,u.useEffect)((()=>{p.current?p.current=!1:l({shortcode:`[analytify-stats metrics="${n}" date_type="${v}" analytics_for="${m}"]`})}),[n,v,m]);const b=`analytify-shortcode-input-${y}`;return(0,t.createElement)("div",{...(0,o.useBlockProps)({className:"components-placeholder"})},(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(a.PanelBody,{title:(0,r.__)("Analytify Shortcode Orchestrator")},(0,t.createElement)(a.SelectControl,{multiple:!0,label:"Select Metrics",value:n,options:c,onChange:e=>l({selectedMetrics:[...e]}),__nextHasNoMarginBottom:!0}),(0,t.createElement)(a.SelectControl,{label:"Period:",value:v,options:[{value:"- 1 days",label:"Yesterday"},{value:"- 7 days",label:"Last week"},{value:"- 15 days",label:"Last 15 days"},{value:"- 30 days",label:"Last 30 days"},{value:"year-to-date",label:"This year"},{value:"- 365 days",label:"Last Year"}],onChange:e=>l({selectedDate:e}),__nextHasNoMarginBottom:!0}),(0,t.createElement)(a.SelectControl,{label:"Analytics For:",value:m,options:[{value:"current",label:"Current Post/Page"},{value:"full",label:"Full Site"}],onChange:e=>l({analyticsFor:e}),__nextHasNoMarginBottom:!0}))),(0,t.createElement)("label",{htmlFor:b,className:"components-placeholder__label"},(0,r.__)("Analytify Shortcode:")),(0,t.createElement)(o.PlainText,{className:"blocks-shortcode__textarea",id:b,value:s,onChange:e=>l({shortcode:e})}))}var v=JSON.parse('[{"value":"","label":"CLEAR DIMENSIONS"},{"value":"city","label":"City"},{"value":"country","label":"Country"},{"value":"firstUserSourceMedium","label":"First user source / medium"},{"value":"fullPageUrl","label":"Full page URL"},{"value":"pageLocation","label":"Page Location"},{"value":"pagePath","label":"Page Path"},{"value":"pageTitle","label":"Page Title"},{"value":"sessionSourceMedium","label":"Session source / medium"}]'),m=JSON.parse('[{"value":"totalUsers","label":"Total Users"},{"value":"newUsers","label":"New Users"},{"value":"sessions","label":"Sessions"},{"value":"bounceRate","label":"Bounce Rate"},{"value":"userEngagementDuration","label":"User Engagement Duration"},{"value":"averageSessionDuration","label":"Average Session Duration"},{"value":"screenPageViews","label":"Page Views"},{"value":"screenPageViewsPerSession","label":"Screen Page Views Per Session"}]');function p({attributes:e,setAttributes:l}){const{shortcode:s,selectedMetrics:n,selectedDimensions:d,sortOption:y,selectedDate:b,analyticsFor:h,post_id:g}=e,[_,w]=(0,u.useState)(""),[S,E]=(0,u.useState)(""),C=(0,u.useRef)(!0),P=(0,i.useInstanceId)(p);(0,u.useEffect)((()=>{if(C.current)return void(C.current=!1);let e="[analytify-stats";n?.length&&(e+=` metrics="${n}"`),d?.length&&(e+=` dimensions="${d}"`);let t="";b&&(t=` date_type="${b}"`),(_||S)&&(t=` date_type='custom' start_date="${_}" end_date="${S}"`),e+=t,e+=` analytics_for="${h}"`,"page_id"===h&&g&&(e+=` custom_page_id="${g}"`),y&&(e+=` sort="${y}"`),e+="]",l({shortcode:e})}),[n,d,b,y,h,_,S,g]);const f=`analytify-shortcode-input-${P}`;return(0,t.createElement)("div",{...(0,o.useBlockProps)({className:"components-placeholder"})},(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(a.PanelBody,{title:(0,r.__)("Analytify Shortcode Orchestrator")},(0,t.createElement)(a.SelectControl,{multiple:!0,label:"Select Metrics",value:n,options:c,onChange:e=>{""==e[0]?l({selectedMetrics:[]}):l({selectedMetrics:[...e]})},__nextHasNoMarginBottom:!0}),(0,t.createElement)(a.SelectControl,{multiple:!0,label:"Select Dimensions",value:d,options:v,onChange:e=>{""==e[0]?l({selectedDimensions:[]}):l({selectedDimensions:[...e]})},__nextHasNoMarginBottom:!0}),(0,t.createElement)(a.SelectControl,{label:"Period:",value:b,options:[{value:"- 1 days",label:"Yesterday"},{value:"- 7 days",label:"Last week"},{value:"- 15 days",label:"Last 15 days"},{value:"- 30 days",label:"Last 30 days"},{value:"year-to-date",label:"This year"},{value:"- 365 days",label:"Last Year"}],onChange:e=>{l({selectedDate:e}),w(""),E("")},__nextHasNoMarginBottom:!0}),(0,t.createElement)(a.SelectControl,{label:"Sort by",value:y,options:m,onChange:e=>l({sortOption:e}),__nextHasNoMarginBottom:!0}),(0,t.createElement)(a.SelectControl,{label:"Analytics For:",value:h,options:[{value:"current",label:"Current Post/Page"},{value:"full",label:"Full Site"},{value:"page_id",label:"Post/Page ID"}],onChange:e=>l({analyticsFor:e}),__nextHasNoMarginBottom:!0}),"page_id"===h&&(0,t.createElement)(a.__experimentalInputControl,{label:"Enter Post ID",type:"number",value:g,onChange:e=>{l(e>0?{post_id:e}:{post_id:null})}})),(0,t.createElement)(a.PanelBody,{title:"Custom Date",initialOpen:!1},(0,t.createElement)(a.PanelRow,null,(0,t.createElement)("label",null,(0,r.__)("Start Date:","wp-analytify-pro"))),(0,t.createElement)(a.DatePicker,{currentDate:_,onChange:e=>w(new Date(e).toLocaleDateString("en-CA")),is12Hour:!0}),(0,t.createElement)(a.PanelRow,null,(0,t.createElement)("label",null,(0,r.__)("End Date:","wp-analytify-pro"))),(0,t.createElement)(a.DatePicker,{currentDate:S,onChange:e=>E(new Date(e).toLocaleDateString("en-CA")),is12Hour:!0}))),(0,t.createElement)("label",{htmlFor:f,className:"components-placeholder__label"},(0,r.__)("Analytify Shortcode:")),(0,t.createElement)(o.PlainText,{className:"blocks-shortcode__textarea",id:f,value:s,onChange:e=>l({shortcode:e})}))}var y=JSON.parse('{"u2":"analytify/shortcodes"}'),b=[{name:"simple-shortcode",title:(0,r.__)("Analytify Simple Shortcode"),description:(0,r.__)("Create Simple Analytify Shortcode to show stats. It's enough most of the times"),icon:(0,t.createElement)(a.SVG,{width:"800px",height:"800px",viewBox:"0 0 17 17",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(a.Path,{d:"M0.026 1h3v1h-2v13h2v1h-3v-15zM14.026  1v1h2v13h-2v1h3v-15h-3zM8.91 7.967c-1.115-0.433-1.607-0.804-1.607-1.56 0-0.552 0.42-1.211  1.523-1.211 0.731 0 1.271 0.239 1.535 0.384l0.288-0.852c-0.359-0.204-0.96-0.396-1.787-0.396-1.571  0-2.614 0.936-2.614 2.195 0 1.14 0.815 1.823 2.135 2.291 1.091 0.419 1.523 0.851 1.523 1.606 0  0.815-0.624 1.38-1.691 1.38-0.72 0-1.403-0.24-1.871-0.528l-0.264 0.876c0.432 0.287 1.283 0.516 2.062  0.516 1.907 0 2.831-1.079 2.831-2.327 0.001-1.188-0.696-1.847-2.063-2.374z"})),attributes:{shortcode:'[analytify-stats metrics="screenPageViews" date_type="- 1 days" analytics_for="current"]',selectedMetrics:["screenPageViews"],selectedDate:"- 1 days",analyticsFor:"current",shortCodeType:"simple"},scope:["block"],isActive:(e,t)=>e.shortCodeType===t.shortCodeType},{name:"advance-shortcode",title:"Analytify Advaned Shortcode",description:(0,r.__)("Get more granular control over shortcode generation use to create complex shortcodes."),attributes:{shortcode:'[analytify-stats metrics="sessions" date_type="- 1 days" analytics_for="current"]',selectedMetrics:["sessions"],selectedDimensions:[],sortOption:"",selectedDate:"- 1 days",analyticsFor:"current",shortCodeType:"advanced",post_id:"12"},icon:l,scope:["block"],isActive:(e,t)=>e.shortCodeType===t.shortCodeType}];(0,e.registerBlockType)(y.u2,{icon:l,variations:b,edit:function(e){const{attributes:{shortCodeType:a}}=e;let l=n;return"simple"===a?l=d:"advanced"===a&&(l=p),(0,t.createElement)(l,{...e})},save:function({attributes:e}){return(0,t.createElement)("p",null,(0,t.createElement)(u.RawHTML,null,e.shortcode))}})}();